<!DOCTYPE html>
<html lang="en">
  <head>
	<meta property="og:title" content="NWSL Chaos Map" />
    <title>NWSL Chaos Map</title>

    <style type="text/css">
      #mynetwork {
        width: 100%;
        height: 100%;
        border: none;
		margin: auto;
      }
	  html, body {
		margin: 0 !important;
		padding: 0 !important;
		height: 100%;
		width: 100%;
	  }
	  form {
		position: absolute;
		background-color: #898989;
		z-index: 10;
		padding: 10px;
		border-radius: 0 0 5px 0;
	}
    </style>

    <script
      type="text/javascript"
      src="vis-network.min.js"
    ></script>
	
	<script
      type="text/javascript"
      src="export.js"
	  charset="UTF-8"
    >
	</script>

    <script type="text/javascript">
	
	  var network;
	
	  var network;
        var lookupCount = 0;

        function lookup() {
            const inputField = document.getElementById("lname").value.toLowerCase();
            const filtered = nodes.filter(e => e.label.toLowerCase().includes(inputField) || e.group.toLowerCase().includes(inputField));
            if (filtered.length !== 0) {
                var options = {
                    scale: 1.0,
                    offset: {x: 0, y: 0},
                    animation: {
                        duration: 1000,
                        easingFunction: "easeInOutQuad",
                    },
                };
                let filteredPerson = filtered[lookupCount % filtered.length];
                network.focus(filteredPerson.id, options);
                network.selectNodes(filtered.map(it => it.id));
                lookupCount += 1;
            }
        }
	  
      function draw() {
        var container = document.getElementById("mynetwork");
        var data = {
          nodes: nodes,
          edges: edges,
        };
        var options = {
          nodes: {
            shape: "circularImage",
			      borderWidth: 6,
            size: 40,
            fixed: {
              x:true,
              y:true
            },
          },
          edges: {
            arrows: {
              to: {
                enabled: true,
              },
            },
            scaling:{
              min: 1,
              max: 3,
              label: {
                enabled: true,
                min: 10,
                max: 24,
                maxVisible: 30,
                drawThreshold: 5
              },
            },
            selectionWidth: function (width) {return width*2;}
          },
		      groups: {
			      notgrouped: {color:{background:'gray', border:'gray'}, borderWidth:3}
		      },
          physics: {
            repulsion: {
              centralGravity: 0.2,
              springLength: 500,
              springConstant: 0.2,
              nodeDistance: 200,
              damping: 0.09,
            },
            maxVelocity: 200,
            solver: "repulsion",
            timestep: 0.35,
            stabilization: { iterations: 40 },
          },
        };
        network = new vis.Network(container, data, options);
      }
    </script>
  </head>

  <body onload="draw()">
	<form action="javascript:;" onsubmit="lookup()">
	  <input type="text" id="lname" name="lname" placeholder="Player Name">
	  <input type="submit" value="Search">
	</form>
    <div id="mynetwork"></div>
  </body>
</html>